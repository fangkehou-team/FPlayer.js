this.fangkehou=this.fangkehou||{},function(){function t(t,i){this.container=t}t.create=function(t,i={}){return t instanceof HTMLElement?new this(t,i):"string"==typeof t&&document.getElementById(t)?new this(document.getElementById(t),i):void console.error("Unable to initialize FPlayer: No valid Container available")},t.init=function(){},t.destroy=function(){},t.update=function(){},t.ACTION_PREPARE_READY="prepare_ready",t.ACTION_PREPARE_FAIL="prepare_fail",t.ACTION_ON_PLAY="on_play",t.ACTION_ON_LOAD="on_load",t.ACTION_ON_PAUSE="on_pause",t.ACTION_ON_SWITCH="on_switch",t.ACTION_ON_ADD="on_add",t.ACTION_ON_NEXT="on_next",t.ACTION_ON_PREVIOUS="on_previous",t.MODE_SINGLE="single",t.MODE_LIST="list",t.MODE_RANDOM="random",t.mContainer=void 0,t.mTheme=void 0,t.mMusicList=[],t.mMode=void 0,t.mListener=function(t,i){},t._mView=void 0,t._mVolume=void 0,t._mPlayList=[],t._mCurrentId=void 0,t.setTheme=function(t){this.mTheme=t},t.getTheme=function(){return this.mTheme},t.setMusicList=function(t){this.mMusicList=t,this.change(0)},t.getMusicList=function(){return this.mMusicList},t.addMusic=function(t){this.mMusicList[this.mMusicList.length]=t,this._mPlayList[this._mPlayList.length]=t,this._refreshList()},t.setMode=function(t){this.mMode=t,this._refreshList()},t.getMode=function(){return this.mMode},t.setListener=function(t){this.mListener=t},t.play=function(){},t.pause=function(){},t.onNext=function(){this.mMode!==fangkehou.FPlayer.MODE_SINGLE?this.next():this.dispatchEvent(new CustomEvent(fangkehou.FPlayer.ACTION_ON_NEXT,{detail:{}}))},t.next=function(){var t=this._mPlayList[0];this._mPlayList.shift(),this._mPlayList.push(t),t=this._mPlayList[0],this._pushSong(t),this.dispatchEvent(new CustomEvent(fangkehou.FPlayer.ACTION_ON_NEXT,{detail:{}}))},t.previous=function(){var t=this._mPlayList[this._mPlayList.length];this._mPlayList.unshift(t),this._mPlayList.pop(),this._pushSong(t),this.dispatchEvent(new CustomEvent(fangkehou.FPlayer.ACTION_ON_PREVIOUS,{detail:{}}))},t.switch=function(i){this._mPlayList=[];for(let t=i;t<this.mMusicList.length;t++)this._mPlayList[this._mPlayList.length]=this.mMusicList[t];for(let t=0;t<i;t++)this._mPlayList[this._mPlayList.length]=this.mMusicList[t];this._refreshList();var t=this._mPlayList[0];this._pushSong(t),this.dispatchEvent(new Event(fangkehou.FPlayer.ACTION_ON_SWITCH,{detail:{}}))},t._refreshList=function(){if(this.mMode===fangkehou.FPlayer.MODE_RANDOM){var i,s,e=this._mPlayList[0];this._mPlayList.shift();let t=this._mPlayList.length;for(;0<t;)i=Math.floor(Math.random()*t),s=this._mPlayList[t-1],this._mPlayList[t-1]=this._mPlayList[i],this._mPlayList[i]=s,t--;this._mPlayList.unshift(e)}},t._getIdByMusic=function(i){if(0==this.mMusicList.length)return-1;for(let t=0;t<this.mMusicList.length;t++)if(i.equals(this.mMusicList[t]))return t;return-1},t._pushSong=function(t){t.equals(this.mMusicList[this._mCurrentId]),this._mCurrentId=this._getIdByMusic(t)},fangkehou.FPlayer=t}(),this.fangkehou=this.fangkehou||{},function(){function t(t,i){this.time=t,this.lyric=i}t.time=void 0,t.lyric=void 0,t.fromLrcString=function(t){let e=t.split("\n"),n=[],h=0;for(let i=0;i<e.length;i++){let t=e[i].replace(/[\s]*\[/g,"[").replace(/][\s]*/g,"]"),s=t.substring(t.indexOf("[")+1,t.indexOf("]")).split(":");if("offset"!=s[0].toLowerCase()){if(!isNaN(parseInt(s[0]))){s=t.match(/\[[0-9:.]*]/g);let i=0;for(let t=0;t<s.length;t++)i+=s[t].length;var o=t.substring(i);for(let i=0;i<s.length;i++){let t=s[i].substring(1,s[i].length);t=t.split(":"),t=parseFloat(Math.max(60*parseInt(t[0])+parseFloat(t[1])+h/1e3,0).toFixed(3)),n[n.length]=new fangkehou.Lyric(t,o)}}}else h=parseInt(s[1])}return n.sort((t,i)=>t.time-i.time),n},fangkehou.Lyric=t}(),this.fangkehou=this.fangkehou||{},function(){function t(t,i,s,e,n){this.name=t,this.artist=i,this.cover=s,"string"==typeof e&&(this.lrc=fangkehou.Lyric.fromLrcString(e)),e instanceof Array&&(this.lrc=e),"string"==typeof n&&(this.content=n),n instanceof Blob&&(this.content=URL.createObjectURL(n))}t.name=void 0,t.artist=void 0,t.cover=void 0,t.lrc=void 0,t.content=void 0,t.equals=function(t){let i=0;return this.name===t.name&&i++,this.artist===t.artist&&i++,this.content===t.content&&i++,this.cover===t.cover&&i++,2<=i||this.lrc===t.lrc},fangkehou.Music=t}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkZQbGF5ZXIuanMiLCJMeXJpYy5qcyIsIk11c2ljLmpzIl0sIm5hbWVzIjpbInRoaXMiLCJmYW5na2Vob3UiLCJGUGxheWVyIiwiY29udGFpbmVyIiwib3B0aW9ucyIsImNyZWF0ZSIsIkhUTUxFbGVtZW50IiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsImNvbnNvbGUiLCJlcnJvciIsImluaXQiLCJkZXN0cm95IiwidXBkYXRlIiwiQUNUSU9OX1BSRVBBUkVfUkVBRFkiLCJBQ1RJT05fUFJFUEFSRV9GQUlMIiwiQUNUSU9OX09OX1BMQVkiLCJBQ1RJT05fT05fTE9BRCIsIkFDVElPTl9PTl9QQVVTRSIsIkFDVElPTl9PTl9TV0lUQ0giLCJBQ1RJT05fT05fQUREIiwiQUNUSU9OX09OX05FWFQiLCJBQ1RJT05fT05fUFJFVklPVVMiLCJNT0RFX1NJTkdMRSIsIk1PREVfTElTVCIsIk1PREVfUkFORE9NIiwibUNvbnRhaW5lciIsInVuZGVmaW5lZCIsIm1UaGVtZSIsIm1NdXNpY0xpc3QiLCJtTW9kZSIsIm1MaXN0ZW5lciIsInBsYXllciIsImV2ZW50IiwiX21WaWV3IiwiX21Wb2x1bWUiLCJfbVBsYXlMaXN0IiwiX21DdXJyZW50SWQiLCJzZXRUaGVtZSIsInRoZW1lIiwiZ2V0VGhlbWUiLCJzZXRNdXNpY0xpc3QiLCJsaXN0IiwiY2hhbmdlIiwiZ2V0TXVzaWNMaXN0IiwiYWRkTXVzaWMiLCJtdXNpYyIsImxlbmd0aCIsIl9yZWZyZXNoTGlzdCIsInNldE1vZGUiLCJtb2RlIiwiZ2V0TW9kZSIsInNldExpc3RlbmVyIiwibGlzdGVuZXIiLCJwbGF5IiwicGF1c2UiLCJvbk5leHQiLCJuZXh0IiwiZGlzcGF0Y2hFdmVudCIsIkN1c3RvbUV2ZW50IiwiZGV0YWlsIiwibGV0IiwiY3VycmVudCIsInNoaWZ0IiwicHVzaCIsIl9wdXNoU29uZyIsInByZXZpb3VzIiwidW5zaGlmdCIsInBvcCIsInN3aXRjaCIsImlkIiwiaSIsIkV2ZW50IiwiaW5kZXgiLCJ0ZW1wIiwibCIsIk1hdGgiLCJmbG9vciIsInJhbmRvbSIsIl9nZXRJZEJ5TXVzaWMiLCJlcXVhbHMiLCJMeXJpYyIsInRpbWUiLCJseXJpYyIsImZyb21McmNTdHJpbmciLCJscmNTdHJpbmciLCJseXJpY0xpbmVzIiwic3BsaXQiLCJseXJpY3NMaXN0Iiwib2Zmc2V0IiwiY3VycmVudEx5cmljIiwicmVwbGFjZSIsInN1YnN0cmluZyIsImluZGV4T2YiLCJ0b0xvd2VyQ2FzZSIsImlzTmFOIiwicGFyc2VJbnQiLCJtYXRjaCIsImx5cmljU3RhcnQiLCJ4IiwibHlyaWNTdHJpbmciLCJseXJpY1RpbWUiLCJwYXJzZUZsb2F0IiwibWF4IiwidG9GaXhlZCIsInNvcnQiLCJhIiwiYiIsIk11c2ljIiwibmFtZSIsImFydGlzdCIsImNvdmVyIiwibHJjIiwiY29udGVudCIsIkFycmF5IiwiQmxvYiIsIlVSTCIsImNyZWF0ZU9iamVjdFVSTCIsInJlc3VsdCJdLCJtYXBwaW5ncyI6IkFBQ0FBLEtBQUFDLFVBQUFELEtBQUFDLFdBQUEsR0FFQSxXQXdCQSxTQUFBQyxFQUFBQyxFQUFBQyxHQUNBSixLQUFBRyxVQUFBQSxFQWdCQUQsRUFBQUcsT0FBQSxTQUFBRixFQUFBQyxFQUFBLElBQ0EsT0FBQUQsYUFBQUcsWUFDQSxJQUFBTixLQUFBRyxFQUFBQyxHQUVBLGlCQUFBRCxHQUNBSSxTQUFBQyxlQUFBTCxHQUNBLElBQUFILEtBQUFPLFNBQUFDLGVBQUFMLEdBQUFDLFFBR0FLLFFBQUFDLE1BQUEsK0RBTUFSLEVBQUFTLEtBQUEsYUFNQVQsRUFBQVUsUUFBQSxhQU1BVixFQUFBVyxPQUFBLGFBTUFYLEVBQUFZLHFCQUFBLGdCQUVBWixFQUFBYSxvQkFBQSxlQUVBYixFQUFBYyxlQUFBLFVBRUFkLEVBQUFlLGVBQUEsVUFFQWYsRUFBQWdCLGdCQUFBLFdBRUFoQixFQUFBaUIsaUJBQUEsWUFFQWpCLEVBQUFrQixjQUFBLFNBRUFsQixFQUFBbUIsZUFBQSxVQUVBbkIsRUFBQW9CLG1CQUFBLGNBRUFwQixF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QUFDLGdCQUFBSixJQVFBTCxFQUFBQyxVQUFBbEYsRUFLQWlGLEVBQUFFLFlBQUFuRixFQUtBaUYsRUFBQUcsV0FBQXBGLEVBS0FpRixFQUFBSSxTQUFBckYsRUFLQWlGLEVBQUFLLGFBQUF0RixFQU1BaUYsRUFBQTVCLE9BQUEsU0FBQWxDLEdBQ0FlLElBQUF5RCxFQUFBLEVBYUEsT0FaQXRILEtBQUE2RyxPQUFBL0QsRUFBQStELE1BQ0FTLElBRUF0SCxLQUFBOEcsU0FBQWhFLEVBQUFnRSxRQUNBUSxJQUVBdEgsS0FBQWlILFVBQUFuRSxFQUFBbUUsU0FDQUssSUFFQXRILEtBQUErRyxRQUFBakUsRUFBQWlFLE9BQ0FPLElBRUEsR0FBQUEsR0FHQXRILEtBQUFnSCxNQUFBbEUsRUFBQWtFLEtBS0EvRyxVQUFBMkcsTUFBQUEsRUF6RkEiLCJmaWxlIjoiZnBsYXllci5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvL2ZhbmdrZWhvdeWRveWQjeepuumXtO+8jOmBv+WFjea3t+a3hlxudGhpcy5mYW5na2Vob3UgPSB0aGlzLmZhbmdrZWhvdSB8fCB7fTtcblxuKGZ1bmN0aW9uICgpIHtcbiAgICAvKipcbiAgICAgKiA8Yj7ku4vnu408L2I+PGJyIC8+XG4gICAgICog5qyi6L+O5L2/55SoRlBsYXllciAtIEZhbmdrZWhvdSBQbGF5ZXIg77yBXG4gICAgICog6L+Z5piv5LiA5qy+6ZKI5a+5546w5Luj5YyW5rWP6KeI5Zmo6K6+6K6h55qE6Z+z5LmQ5pKt5pS+5Zmo77yM5YW35pyJ55WM6Z2i576O6KeC77yM6K6+572u5pa55L6/55qE5LyY54K577yI5YeA6IO9556O5ZC5LV8tI++8iVxuICAgICAqIOaCqOaXouWPr+S7peebtOaOpeS7pem7mOiupOiuvue9ruebtOaOpeS9v+eUqO+8jOS5n+WPr+S7peWvuUZQbGF5ZXLlgZrlh7roh6rlrprkuYnnmoTorr7nva5cbiAgICAgKlxuICAgICAqIEZQbGF5ZXLlhYHorrjnlKjmiLfpgJrov4flj4LmlbDlr7lGUGxheWVy5aSW6KeC77yM6KGM5Li66L+b6KGM6LCD5pW077yM5YW35L2T6KeE5YiZ5Y+K5a6a5LmJ5aaC5LiL77yaXG4gICAgICpcbiAgICAgKiBAdG9kbyDlj4LmlbDnmoTlrprkuYlcbiAgICAgKlxuICAgICAqIOi/meaYr0ZQbGF5ZXLmnoTpgKDlh73mlbDvvIzlrp7njrDkuoZGUGxheWVy5LiO5a655Zmo5ZKMRlBsYXllcuiuvue9ruWPguaVsOeahOe7keWumu+8jOWQjOaXtuS5n+aJv+i9vUZQbGF5ZXLnmoTnsbvlrprkuYnjgIJcbiAgICAgKlxuICAgICAqIEBjbGFzcyBGUGxheWVyXG4gICAgICogQGNvbnN0cnVjdG9yXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBjb250YWluZXIgRlBsYXllcuWwhuimgeWhq+WFheeahOWuueWZqFxuICAgICAqIEBwYXJhbSB7b2JqZWN0fSBvcHRpb25zIEZQbGF5ZXLorr7nva7lj4LmlbBcbiAgICAgKlxuICAgICAqIEBleGFtcGxlXG4gICAgICogdmFyIEZQbGF5ZXIgPSBuZXcgZmFuZ2tlaG91LkZQbGF5ZXIuY3JlYXRlKFwiY29udGFpbmVyXCIsIHtcbiAgICAgKlxuICAgICAqIH0pXG4gICAgICovXG4gICAgZnVuY3Rpb24gRlBsYXllcihjb250YWluZXIsIG9wdGlvbnMpIHtcbiAgICAgICAgdGhpcy5jb250YWluZXIgPSBjb250YWluZXI7XG4gICAgICAgIC8vVE9ETzrlkox5YW/lr7nmjqXvvIzlrp7njrDlhbfkvZPlip/og71cblxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEZQbGF5ZXLnmoTliJvlu7rlh73mlbDvvIzkuI4g4oCYbmV3IEZQbGF5ZXIoLi4uKeKAmSDnmoTkvZznlKjnm7jlkIzvvIzkvYbmmK9jb250YWluZXLlj6/ku6Xkvb/nlKhjb250YWluZXLnmoRpZOS7o+abv1xuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBwYXJhbSB7c3RyaW5nfEhUTUxFbGVtZW50fSBjb250YWluZXIgRlBsYXllcuWwhuimgeWhq+WFheeahOWuueWZqFxuICAgICAqIEBwYXJhbSB7b2JqZWN0fSBvcHRpb25zIEZQbGF5ZXLorr7nva7lj4LmlbDvvIzkuI3orr7nva7liJnkvb/nlKjpu5jorqTlj4LmlbDvvIjor6bop4EgRlBsYXllcuaehOmAoOWHveaVsCB7QGxpbmsgRlBsYXllciBGUGxheWVyKCl977yJXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtGUGxheWVyfSBGUGxheWVy5a+56LGhXG4gICAgICpcbiAgICAgKiBAdG9kbyDlkox5YW/lr7nmjqXvvIzorr7nva7pu5jorqTlj4LmlbBcbiAgICAgKi9cbiAgICBGUGxheWVyLmNyZWF0ZSA9IGZ1bmN0aW9uIChjb250YWluZXIsIG9wdGlvbnMgPSB7fSkge1xuICAgICAgICBpZiAoY29udGFpbmVyIGluc3RhbmNlb2YgSFRNTEVsZW1lbnQpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgdGhpcyhjb250YWluZXIsIG9wdGlvbnMpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlb2YgY29udGFpbmVyID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgaWYgKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGNvbnRhaW5lcikpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IHRoaXMoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoY29udGFpbmVyKSwgb3B0aW9ucyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY29uc29sZS5lcnJvcihcIlVuYWJsZSB0byBpbml0aWFsaXplIEZQbGF5ZXI6IE5vIHZhbGlkIENvbnRhaW5lciBhdmFpbGFibGVcIik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEZQbGF5ZXLliJ3lp4vljJblh73mlbBcbiAgICAgKiBAdG9kbyBGUGxheWVy5Yid5aeL5YyW5YeG5aSHXG4gICAgICovXG4gICAgRlBsYXllci5pbml0ID0gZnVuY3Rpb24oKXtcblxuICAgIH1cbiAgICAvKipcbiAgICAgKiBGUGxheWVy6ZSA5q+B5Ye95pWwXG4gICAgICovXG4gICAgRlBsYXllci5kZXN0cm95ID0gZnVuY3Rpb24oKXtcblxuICAgIH1cbiAgICAvKipcbiAgICAgKiBGUGxheWVy6YWN572u5pu05paw5ZCO6LCD55So5Ye95pWw77yM5pys6LSo5LiK5piv5ZCnRlBsYXllcumUgOavgeWQjumHjeaWsOWIm+W7ulxuICAgICAqL1xuICAgIEZQbGF5ZXIudXBkYXRlID0gZnVuY3Rpb24oKXtcblxuICAgIH1cblxuICAgIC8vdG9kbzog5ZKMeWFv5a+55o6l77yM5a6M5oiQRlBsYXllci5USEVNRV8g5Li76aKY77yMRlBsYXllci5NT0RFXyDmqKHlvI/vvIxGUGxheWVyLkFDVElPTl8g5LqL5Lu2562J5bi46YeP6K6+572uXG5cbiAgICBGUGxheWVyLkFDVElPTl9QUkVQQVJFX1JFQURZID0gXCJwcmVwYXJlX3JlYWR5XCI7XG5cbiAgICBGUGxheWVyLkFDVElPTl9QUkVQQVJFX0ZBSUwgPSBcInByZXBhcmVfZmFpbFwiO1xuXG4gICAgRlBsYXllci5BQ1RJT05fT05fUExBWSA9IFwib25fcGxheVwiO1xuXG4gICAgRlBsYXllci5BQ1RJT05fT05fTE9BRCA9IFwib25fbG9hZFwiO1xuXG4gICAgRlBsYXllci5BQ1RJT05fT05fUEFVU0UgPSBcIm9uX3BhdXNlXCI7XG5cbiAgICBGUGxheWVyLkFDVElPTl9PTl9TV0lUQ0ggPSBcIm9uX3N3aXRjaFwiO1xuXG4gICAgRlBsYXllci5BQ1RJT05fT05fQUREID0gXCJvbl9hZGRcIjtcblxuICAgIEZQbGF5ZXIuQUNUSU9OX09OX05FWFQgPSBcIm9uX25leHRcIjtcblxuICAgIEZQbGF5ZXIuQUNUSU9OX09OX1BSRVZJT1VTID0gXCJvbl9wcmV2aW91c1wiO1xuXG4gICAgRlBsYXllci5NT0RFX1NJTkdMRSA9IFwic2luZ2xlXCI7XG5cbiAgICBGUGxheWVyLk1PREVfTElTVCA9IFwibGlzdFwiO1xuXG4gICAgRlBsYXllci5NT0RFX1JBTkRPTSA9IFwicmFuZG9tXCI7XG5cbiAgICAvKipcbiAgICAgKiBGUGxheWVy5bCG6KaB5aGr5YWF55qE5a655ZmoXG4gICAgICogQHR5cGUge0hUTUxFbGVtZW50fVxuICAgICAqL1xuICAgIEZQbGF5ZXIubUNvbnRhaW5lciA9IHVuZGVmaW5lZDtcbiAgICAvKipcbiAgICAgKiBGUGxheWVy5Li76aKYXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICBGUGxheWVyLm1UaGVtZSA9IHVuZGVmaW5lZDtcbiAgICAvKipcbiAgICAgKiBGUGxheWVy6Z+z5LmQ5YiX6KGoXG4gICAgICogQHR5cGUge0FycmF5PGZhbmdrZWhvdS5NdXNpYz59XG4gICAgICovXG4gICAgRlBsYXllci5tTXVzaWNMaXN0ID0gW107XG4gICAgLyoqXG4gICAgICogRlBsYXllcuaSreaUvuaooeW8j1xuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgRlBsYXllci5tTW9kZSA9IHVuZGVmaW5lZDtcbiAgICAvKipcbiAgICAgKiBGUGxheWVy5LqL5Lu255uR5ZCs5ZmoXG4gICAgICogQHBhcmFtIHBsYXllclxuICAgICAqIEBwYXJhbSBldmVudFxuICAgICAqL1xuICAgIEZQbGF5ZXIubUxpc3RlbmVyID0gZnVuY3Rpb24ocGxheWVyLCBldmVudCl7XG5cbiAgICB9O1xuXG4gICAgRlBsYXllci5fbVZpZXcgPSB1bmRlZmluZWQ7XG5cbiAgICBGUGxheWVyLl9tVm9sdW1lID0gdW5kZWZpbmVkO1xuXG4gICAgRlBsYXllci5fbVBsYXlMaXN0ID0gW107XG5cbiAgICBGUGxheWVyLl9tQ3VycmVudElkID0gdW5kZWZpbmVkO1xuXG4gICAgLyoqXG4gICAgICog6K6+572u5Li76aKYXG4gICAgICpcbiAgICAgKiBAZnVuY3Rpb24gc2V0VGhlbWVcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gdGhlbWVcbiAgICAgKi9cbiAgICBGUGxheWVyLnNldFRoZW1lID0gZnVuY3Rpb24gKHRoZW1lKSB7XG4gICAgICAgIHRoaXMubVRoZW1lID0gdGhlbWU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIOiOt+WPluW9k+WJjeS4u+mimFxuICAgICAqIEBmdW5jdGlvbiBnZXRUaGVtZVxuICAgICAqIEByZXR1cm5zIHtudW1iZXJ9IOS4u+mimOS7o+eggVxuICAgICAqL1xuICAgIEZQbGF5ZXIuZ2V0VGhlbWUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1UaGVtZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICog6K6+572u6Z+z5LmQ5YiX6KGoXG4gICAgICogQGZ1bmN0aW9uIHNldE11c2ljTGlzdFxuICAgICAqIEBwYXJhbSB7QXJyYXk8ZmFuZ2tlaG91Lk11c2ljPn0gbGlzdCDpn7PkuZDliJfooahcbiAgICAgKi9cbiAgICBGUGxheWVyLnNldE11c2ljTGlzdCA9IGZ1bmN0aW9uIChsaXN0KSB7XG4gICAgICAgIHRoaXMubU11c2ljTGlzdCA9IGxpc3Q7XG4gICAgICAgIHRoaXMuY2hhbmdlKDApO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiDojrflj5bpn7PkuZDliJfooahcbiAgICAgKiBAZnVuY3Rpb24gZ2V0TXVzaWNMaXN0XG4gICAgICogQHJldHVybnMge0FycmF5PGZhbmdrZWhvdS5NdXNpYz59XG4gICAgICovXG4gICAgRlBsYXllci5nZXRNdXNpY0xpc3QgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1NdXNpY0xpc3Q7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIOa3u+WKoOmfs+S5kOWIsOWIl+ihqOacq+WwvlxuICAgICAqIEBmdW5jdGlvbiBhZGRNdXNpY1xuICAgICAqIEBwYXJhbSB7ZmFuZ2tlaG91Lk11c2ljfSBtdXNpY1xuICAgICAqL1xuICAgIEZQbGF5ZXIuYWRkTXVzaWMgPSBmdW5jdGlvbiAobXVzaWMpIHtcbiAgICAgICAgdGhpcy5tTXVzaWNMaXN0W3RoaXMubU11c2ljTGlzdC5sZW5ndGhdID0gbXVzaWM7XG4gICAgICAgIHRoaXMuX21QbGF5TGlzdFt0aGlzLl9tUGxheUxpc3QubGVuZ3RoXSA9IG11c2ljO1xuICAgICAgICB0aGlzLl9yZWZyZXNoTGlzdCgpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIOiuvue9ruaSreaUvuaooeW8j1xuICAgICAqIEBmdW5jdGlvbiBzZXRNb2RlXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IG1vZGVcbiAgICAgKi9cbiAgICBGUGxheWVyLnNldE1vZGUgPSBmdW5jdGlvbiAobW9kZSkge1xuICAgICAgICB0aGlzLm1Nb2RlID0gbW9kZTtcbiAgICAgICAgdGhpcy5fcmVmcmVzaExpc3QoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICog6I635Y+W5b2T5YmN5pKt5pS+5qih5byPXG4gICAgICogQGZ1bmN0aW9uIGdldE1vZGVcbiAgICAgKiBAcmV0dXJucyB7bnVtYmVyfVxuICAgICAqL1xuICAgIEZQbGF5ZXIuZ2V0TW9kZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubU1vZGU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIOiuvue9ruebkeWQrOWZqFxuICAgICAqIEBmdW5jdGlvbiBzZXRMaXN0ZW5lclxuICAgICAqIEBwYXJhbSB7ZnVuY3Rpb24oZmFuZ2tlaG91LkZQbGF5ZXIsIG51bWJlcil9IGxpc3RlbmVyXG4gICAgICovXG4gICAgRlBsYXllci5zZXRMaXN0ZW5lciA9IGZ1bmN0aW9uIChsaXN0ZW5lcikge1xuICAgICAgICB0aGlzLm1MaXN0ZW5lciA9IGxpc3RlbmVyO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiDmkq3mlL7pgLvovpFcbiAgICAgKiBAZnVuY3Rpb24gcGxheVxuICAgICAqL1xuICAgIEZQbGF5ZXIucGxheSA9IGZ1bmN0aW9uICgpIHtcblxuICAgIH1cbiAgICAvKipcbiAgICAgKiDmmoLlgZzpgLvovpFcbiAgICAgKiBAZnVuY3Rpb24gcGF1c2VcbiAgICAgKi9cbiAgICBGUGxheWVyLnBhdXNlID0gZnVuY3Rpb24gKCkge1xuXG4gICAgfVxuICAgIC8qKlxuICAgICAqIOaSreaUvuWZqOeahOS4i+S4gOmmlumAu+i+kVxuICAgICAqIEBmdW5jdGlvbiBvbk5leHRcbiAgICAgKi9cbiAgICBGUGxheWVyLm9uTmV4dCA9IGZ1bmN0aW9uKCl7XG4gICAgICAgIGlmKHRoaXMubU1vZGUgPT09IGZhbmdrZWhvdS5GUGxheWVyLk1PREVfU0lOR0xFKXtcblxuICAgICAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KG5ldyBDdXN0b21FdmVudChmYW5na2Vob3UuRlBsYXllci5BQ1RJT05fT05fTkVYVCwge1xuICAgICAgICAgICAgICAgIFwiZGV0YWlsXCI6IHtcblxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMubmV4dCgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiDnlKjmiLfmjIflrprkuIvkuIDpppbpgLvovpFcbiAgICAgKiBAZnVuY3Rpb24gbmV4dFxuICAgICAqL1xuICAgIEZQbGF5ZXIubmV4dCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgbGV0IGN1cnJlbnQgPSB0aGlzLl9tUGxheUxpc3RbMF07XG4gICAgICAgIHRoaXMuX21QbGF5TGlzdC5zaGlmdCgpO1xuICAgICAgICB0aGlzLl9tUGxheUxpc3QucHVzaChjdXJyZW50KTtcbiAgICAgICAgY3VycmVudCA9IHRoaXMuX21QbGF5TGlzdFswXTtcbiAgICAgICAgdGhpcy5fcHVzaFNvbmcoY3VycmVudCk7XG4gICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChuZXcgQ3VzdG9tRXZlbnQoZmFuZ2tlaG91LkZQbGF5ZXIuQUNUSU9OX09OX05FWFQsIHtcbiAgICAgICAgICAgIFwiZGV0YWlsXCI6IHtcblxuICAgICAgICAgICAgfVxuICAgICAgICB9KSlcbiAgICB9XG4gICAgLyoqXG4gICAgICog55So5oi35oyH5a6a5LiK5LiA6aaW6YC76L6RXG4gICAgICogQGZ1bmN0aW9uIHByZXZpb3VzXG4gICAgICovXG4gICAgRlBsYXllci5wcmV2aW91cyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgbGV0IGN1cnJlbnQgPSB0aGlzLl9tUGxheUxpc3RbdGhpcy5fbVBsYXlMaXN0Lmxlbmd0aF07XG4gICAgICAgIHRoaXMuX21QbGF5TGlzdC51bnNoaWZ0KGN1cnJlbnQpO1xuICAgICAgICB0aGlzLl9tUGxheUxpc3QucG9wKCk7XG4gICAgICAgIHRoaXMuX3B1c2hTb25nKGN1cnJlbnQpO1xuICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQobmV3IEN1c3RvbUV2ZW50KGZhbmdrZWhvdS5GUGxheWVyLkFDVElPTl9PTl9QUkVWSU9VUywge1xuICAgICAgICAgICAgXCJkZXRhaWxcIjoge1xuXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pKVxuICAgIH1cbiAgICAvKipcbiAgICAgKiDliIfmrYzlubbph43mlrDorqHnrpfliJfooahcbiAgICAgKiBAZnVuY3Rpb24gc3dpdGNoXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGlkXG4gICAgICovXG4gICAgRlBsYXllci5zd2l0Y2ggPSBmdW5jdGlvbihpZCl7XG4gICAgICAgIHRoaXMuX21QbGF5TGlzdCA9IFtdO1xuICAgICAgICBmb3IobGV0IGkgPSBpZDsgaSA8IHRoaXMubU11c2ljTGlzdC5sZW5ndGg7IGkrKyl7XG4gICAgICAgICAgICB0aGlzLl9tUGxheUxpc3RbdGhpcy5fbVBsYXlMaXN0Lmxlbmd0aF0gPSB0aGlzLm1NdXNpY0xpc3RbaV07XG4gICAgICAgIH1cbiAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8IGlkOyBpKyspe1xuICAgICAgICAgICAgdGhpcy5fbVBsYXlMaXN0W3RoaXMuX21QbGF5TGlzdC5sZW5ndGhdID0gdGhpcy5tTXVzaWNMaXN0W2ldO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX3JlZnJlc2hMaXN0KCk7XG4gICAgICAgIGxldCBjdXJyZW50ID0gdGhpcy5fbVBsYXlMaXN0WzBdO1xuICAgICAgICB0aGlzLl9wdXNoU29uZyhjdXJyZW50KTtcbiAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudChmYW5na2Vob3UuRlBsYXllci5BQ1RJT05fT05fU1dJVENILCB7XG4gICAgICAgICAgICBcImRldGFpbFwiOiB7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pKVxuICAgIH1cbiAgICAvKipcbiAgICAgKiDph43mlrDnlJ/miJDpmo/mnLrliJfooahcbiAgICAgKiBAZnVuY3Rpb24gX3JlZnJlc2hMaXN0XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBGUGxheWVyLl9yZWZyZXNoTGlzdCA9IGZ1bmN0aW9uKCl7XG4gICAgICAgIGlmKHRoaXMubU1vZGUgIT09IGZhbmdrZWhvdS5GUGxheWVyLk1PREVfUkFORE9NKXtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBsZXQgY3VycmVudCA9IHRoaXMuX21QbGF5TGlzdFswXTtcbiAgICAgICAgdGhpcy5fbVBsYXlMaXN0LnNoaWZ0KCk7XG4gICAgICAgIGxldCBsID0gdGhpcy5fbVBsYXlMaXN0Lmxlbmd0aDtcbiAgICAgICAgbGV0IGluZGV4LCB0ZW1wO1xuICAgICAgICB3aGlsZShsPjApe1xuICAgICAgICAgICAgaW5kZXggPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkqbCk7XG4gICAgICAgICAgICB0ZW1wID0gdGhpcy5fbVBsYXlMaXN0W2wtMV07XG4gICAgICAgICAgICB0aGlzLl9tUGxheUxpc3RbbC0xXSA9IHRoaXMuX21QbGF5TGlzdFtpbmRleF07XG4gICAgICAgICAgICB0aGlzLl9tUGxheUxpc3RbaW5kZXhdID0gdGVtcDtcbiAgICAgICAgICAgIGwtLTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9tUGxheUxpc3QudW5zaGlmdChjdXJyZW50KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICog6YCa6L+HTXVzaWPnsbvojrflj5ZpZFxuICAgICAqIEBmdW5jdGlvbiBfZ2V0SWRCeU11c2ljXG4gICAgICogQHBhcmFtIHtmYW5na2Vob3UuTXVzaWN9IG11c2ljIOW+heWvu+aJvumfs+S5kFxuICAgICAqIEByZXR1cm5zIHtudW1iZXJ9IGlkXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBGUGxheWVyLl9nZXRJZEJ5TXVzaWMgPSBmdW5jdGlvbihtdXNpYyl7XG4gICAgICAgIGlmKHRoaXMubU11c2ljTGlzdC5sZW5ndGggPT0gMCl7XG4gICAgICAgICAgICByZXR1cm4gLTE7XG4gICAgICAgIH1cbiAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8IHRoaXMubU11c2ljTGlzdC5sZW5ndGg7IGkrKyl7XG4gICAgICAgICAgICBpZihtdXNpYy5lcXVhbHModGhpcy5tTXVzaWNMaXN0W2ldKSl7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIC0xO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiDlkJHmkq3mlL7lmajmjqjpgIHmrYzmm7LlubbliJ3lp4vljJZcbiAgICAgKiBAZnVuY3Rpb24gX3B1c2hTb25nXG4gICAgICogQHBhcmFtIHtmYW5na2Vob3UuTXVzaWN9IG11c2ljXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBGUGxheWVyLl9wdXNoU29uZyA9IGZ1bmN0aW9uIChtdXNpYyl7XG4gICAgICAgIGlmKG11c2ljLmVxdWFscyh0aGlzLm1NdXNpY0xpc3RbdGhpcy5fbUN1cnJlbnRJZF0pKXtcblxuICAgICAgICB9XG4gICAgICAgIHRoaXMuX21DdXJyZW50SWQgPSB0aGlzLl9nZXRJZEJ5TXVzaWMobXVzaWMpO1xuICAgIH1cblxuICAgIC8v5paH5qGj5Zyoe0BsaW5rIEZQbGF5ZXJ95Lit44CC44CC44CC44CC44CC44CCXG4gICAgZmFuZ2tlaG91LkZQbGF5ZXIgPSBGUGxheWVyO1xuXG59KCkpIiwiLy9mYW5na2Vob3Xlkb3lkI3nqbrpl7TvvIzpgb/lhY3mt7fmt4ZcbnRoaXMuZmFuZ2tlaG91ID0gdGhpcy5mYW5na2Vob3UgfHwge307XG5cbihmdW5jdGlvbiAoKSB7XG4gICAgLyoqXG4gICAgICogTHlyaWMg5q2M6K+N57G7XG4gICAgICpcbiAgICAgKiDkuLvopoHlip/og73kuLrooajnpLrlkozop6PmnpDmrYzor43vvIzmr4/kuIDkuKpMeXJpY+WunuS+i+aYr+S4gOihjOatjOivjeOAglxuICAgICAqXG4gICAgICog5LiA6Iis5oOF5Ya15LiLTHlyaWPnsbvkvJrku6UgQXJyYXk8THlyaWM+IOeahOW9ouW8j+WHuueOsO+8jEx5cmlj57G75Lit5Lmf5pyJ5LiT6Zeo55qE5pa55rOV5bCGbHJj5paH5Lu277yI5a2X56ym5Liy5b2i5byP77yJ6L2s5o2i5oiQTHlyaWPmlbDnu4RcbiAgICAgKlxuICAgICAqIOi/meaYr0x5cmlj57G755qE5p6E6YCg5Ye95pWw77yM5ZCM5pe25Lmf5om/6L29THlyaWPnmoTnsbvlrprkuYnjgIJcbiAgICAgKlxuICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAqXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHRpbWUg5byA5aeL5pe26Ze0XG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGx5cmljIOatjOivjeaWh+acrFxuICAgICAqXG4gICAgICovXG4gICAgZnVuY3Rpb24gTHlyaWModGltZSwgbHlyaWMpIHtcbiAgICAgICAgdGhpcy50aW1lID0gdGltZTtcbiAgICAgICAgdGhpcy5seXJpYyA9IGx5cmljO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIOi/meauteatjOivjeW8gOWni+eahOaXtumXtFxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgTHlyaWMudGltZSA9IHVuZGVmaW5lZDtcbiAgICAvKipcbiAgICAgKiDov5nmrrXmrYzor43nmoTmlofmnKxcbiAgICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgICAqL1xuICAgIEx5cmljLmx5cmljID0gdW5kZWZpbmVkO1xuXG4gICAgLyoqXG4gICAgICog5Y+v6IO95pivTHlyaWPnsbvkuK3llK/kuIDnmoTlh73mlbDkuobjgILjgILjgILjgILjgILotJ/otKPop6PmnpBscmPmlofku7bvvIjlrZfnrKbkuLLkuKrkuovvvIlcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gbHJjU3RyaW5nXG4gICAgICogQHJldHVybnMge2ZhbmdrZWhvdS5MeXJpY1tdfVxuICAgICAqL1xuICAgIEx5cmljLmZyb21McmNTdHJpbmcgPSBmdW5jdGlvbihscmNTdHJpbmcpe1xuICAgICAgICAvL+WFiOaKiuatjOivjemAmui/h+Wbnui9puWIh+WIhlxuICAgICAgICBsZXQgbHlyaWNMaW5lcyA9IGxyY1N0cmluZy5zcGxpdCgnXFxuJyk7XG4gICAgICAgIGxldCBseXJpY3NMaXN0ID0gW107XG4gICAgICAgIGxldCBvZmZzZXQgPSAwO1xuICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgbHlyaWNMaW5lcy5sZW5ndGg7IGkrKyl7XG4gICAgICAgICAgICAvL+WOu+aOieavj+S4qnRhZ+WJjeWSjOWQjueahOepuuagvFxuICAgICAgICAgICAgbGV0IGN1cnJlbnRMeXJpYyA9IGx5cmljTGluZXNbaV0ucmVwbGFjZSgvW1xcc10qXFxbL2csIFwiW1wiKS5yZXBsYWNlKC9dW1xcc10qL2csIFwiXVwiKTtcbiAgICAgICAgICAgIGxldCB0aW1lID0gY3VycmVudEx5cmljLnN1YnN0cmluZyhjdXJyZW50THlyaWMuaW5kZXhPZihcIltcIikgKyAxLCBjdXJyZW50THlyaWMuaW5kZXhPZihcIl1cIikpLnNwbGl0KCc6Jyk7XG4gICAgICAgICAgICAvL+agueaNruWumuS5iei/memHjOacieS4qm9mZnNldOaVsOWAvO+8jOaYr+atjOivjeaVtOS9k+eahOWBj+enu+mHj++8jOW6lOivpeivhuWIq+S4gOS4i1xuICAgICAgICAgICAgaWYodGltZVswXS50b0xvd2VyQ2FzZSgpID09IFwib2Zmc2V0XCIpe1xuICAgICAgICAgICAgICAgIG9mZnNldCA9IHBhcnNlSW50KHRpbWVbMV0pO1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy/liankuIvnmoTpnZ7ml7bpl7TmoIfnrb7mipvmjonlsLHlpb3kuobvvIzlr7nmrYzor43mmL7npLrmsqHku4DkuYjnlKhcbiAgICAgICAgICAgIGlmKGlzTmFOKHBhcnNlSW50KHRpbWVbMF0pKSl7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvL+S4gOihjOatjOivjeWPr+iDveacieWkmuS4quaXtumXtHRhZ++8jOWIhuWIq+S7o+ihqOS4jeWQjOeahOaXtumXtOeCue+8jOW6lOivpeWIhuWHuuadpe+8iOi/meS4quaYr2xyY+agvOW8j+acgOeDpuS6uueahOeCue+8iVxuICAgICAgICAgICAgbGV0IHJlZyA9IC9cXFtbMC05Oi5dKl0vZztcbiAgICAgICAgICAgIHRpbWUgPSBjdXJyZW50THlyaWMubWF0Y2gocmVnKTtcbiAgICAgICAgICAgIGxldCBseXJpY1N0YXJ0ID0gMDtcbiAgICAgICAgICAgIGZvcihsZXQgeCA9IDA7IHggPCB0aW1lLmxlbmd0aDsgeCsrKXtcbiAgICAgICAgICAgICAgICBseXJpY1N0YXJ0ICs9IHRpbWVbeF0ubGVuZ3RoO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGV0IGx5cmljU3RyaW5nID0gY3VycmVudEx5cmljLnN1YnN0cmluZyhseXJpY1N0YXJ0KTtcbiAgICAgICAgICAgIGZvcihsZXQgeCA9IDA7IHggPCB0aW1lLmxlbmd0aDsgeCsrKXtcbiAgICAgICAgICAgICAgICBsZXQgbHlyaWNUaW1lID0gdGltZVt4XS5zdWJzdHJpbmcoMSwgdGltZVt4XS5sZW5ndGgpO1xuICAgICAgICAgICAgICAgIGx5cmljVGltZSA9IGx5cmljVGltZS5zcGxpdCgnOicpO1xuICAgICAgICAgICAgICAgIC8v5oqK5pe26Ze06L2s5o2i5oiQ56eS5pWw77yI5bim5pyJ5LiA5Liq5LiJ5L2N5bCP5pWw6KGo56S65q+r56eS77yJXG4gICAgICAgICAgICAgICAgbHlyaWNUaW1lID0gcGFyc2VGbG9hdChNYXRoLm1heCgocGFyc2VJbnQobHlyaWNUaW1lWzBdKSAqIDYwICsgcGFyc2VGbG9hdChseXJpY1RpbWVbMV0pICsgb2Zmc2V0IC8gMTAwMC4wKSwgMC4wKS50b0ZpeGVkKDMpKTtcbiAgICAgICAgICAgICAgICBseXJpY3NMaXN0W2x5cmljc0xpc3QubGVuZ3RoXSA9IG5ldyBmYW5na2Vob3UuTHlyaWMobHlyaWNUaW1lLCBseXJpY1N0cmluZyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy/miormt7fkubHnmoTmrYzor43mjpLluo9cbiAgICAgICAgbHlyaWNzTGlzdC5zb3J0KChhLCBiKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gYS50aW1lIC0gYi50aW1lO1xuICAgICAgICB9KVxuICAgICAgICByZXR1cm4gbHlyaWNzTGlzdDtcbiAgICB9XG5cbiAgICAvL+aWh+aho+WcqHtAbGluayBMeXJpY33kuK3jgILjgILjgILjgILjgILjgIJcbiAgICBmYW5na2Vob3UuTHlyaWMgPSBMeXJpYztcbn0oKSkiLCIvL2ZhbmdrZWhvdeWRveWQjeepuumXtO+8jOmBv+WFjea3t+a3hlxudGhpcy5mYW5na2Vob3UgPSB0aGlzLmZhbmdrZWhvdSB8fCB7fTtcblxuKGZ1bmN0aW9uICgpIHtcbiAgICAvKipcbiAgICAgKiBNdXNpYyDmrYzmm7LnsbtcbiAgICAgKlxuICAgICAqIOS4u+imgeWKn+iDveS4uuS/neWtmOatjOabsuS/oeaBr++8jOWQjOaXtuS5n+WPr+S7peWkhOeQhumDqOWIhuWFs+S6juatjOivjeWSjOmfs+mikeWGheWuueeahOWPguaVsFxuICAgICAqXG4gICAgICog5Lya6Ieq5Yqo5oqKbHJj5qC85byP55qE5q2M6K+N6L2s5YyW5oiQTHlyaWPmlbDnu4TvvIzmiJbogIXmiopcbiAgICAgKlxuICAgICAqIOi/meaYr011c2lj57G755qE5p6E6YCg5Ye95pWw77yM5ZCM5pe25Lmf5om/6L29TXVzaWPnmoTnsbvlrprkuYnjgIJcbiAgICAgKlxuICAgICAqIEBjbGFzcyBNdXNpY1xuICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWUg5q2M5puy5ZCNXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGFydGlzdCDmvJTllLHogIVcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gY292ZXIg5bCB6Z2i6ZO+5o6lXG4gICAgICogQHBhcmFtIHtzdHJpbmd8ZmFuZ2tlaG91Lkx5cmljW119IGxyYyDmrYzor43vvIjlj6/ku6XmmK/mjpLluo/ov4fnmoRMeXJpY+aVsOe7hO+8jOS5n+WPr+S7peaYr0xyY+aWh+S7tu+8iOWtl+espuS4suagvOW8j++8ie+8iVxuICAgICAqIEBwYXJhbSB7c3RyaW5nfEJsb2J9IGNvbnRlbnQg6Z+z6aKR5YaF5a6577yI5Y+v5Lul5piv6ZO+5o6l77yI5pys5Zyw5oiW5Zyo57q/77yJ5oiW6ICFQmxvYuexu++8iVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIE11c2ljKG5hbWUsIGFydGlzdCwgY292ZXIsIGxyYywgY29udGVudCkge1xuICAgICAgICB0aGlzLm5hbWUgPSBuYW1lO1xuICAgICAgICB0aGlzLmFydGlzdCA9IGFydGlzdDtcbiAgICAgICAgdGhpcy5jb3ZlciA9IGNvdmVyO1xuICAgICAgICBpZih0eXBlb2YgbHJjID09PSAnc3RyaW5nJyl7XG4gICAgICAgICAgICB0aGlzLmxyYyA9IGZhbmdrZWhvdS5MeXJpYy5mcm9tTHJjU3RyaW5nKGxyYyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYobHJjIGluc3RhbmNlb2YgQXJyYXkpe1xuICAgICAgICAgICAgdGhpcy5scmMgPSBscmM7XG4gICAgICAgIH1cbiAgICAgICAgaWYodHlwZW9mIGNvbnRlbnQgPT09ICdzdHJpbmcnKXtcbiAgICAgICAgICAgIHRoaXMuY29udGVudCA9IGNvbnRlbnQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYoY29udGVudCBpbnN0YW5jZW9mIEJsb2Ipe1xuICAgICAgICAgICAgdGhpcy5jb250ZW50ID0gVVJMLmNyZWF0ZU9iamVjdFVSTChjb250ZW50KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIOmfs+S5kOWQjeensFxuICAgICAqIEB0eXBlIHtzdHJpbmd9XG4gICAgICovXG4gICAgTXVzaWMubmFtZSA9IHVuZGVmaW5lZDtcbiAgICAvKipcbiAgICAgKiDmrYzmiYtcbiAgICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgICAqL1xuICAgIE11c2ljLmFydGlzdCA9IHVuZGVmaW5lZDtcbiAgICAvKipcbiAgICAgKiDlsIHpnaLvvIjpk77mjqXvvIxodHRw5oiWYmxvYuaIlmJhc2U2NO+8iVxuICAgICAqIEB0eXBlIHtzdHJpbmd9XG4gICAgICovXG4gICAgTXVzaWMuY292ZXIgPSB1bmRlZmluZWQ7XG4gICAgLyoqXG4gICAgICog5q2M6K+N77yITHlyaWPmlbDnu4TvvIlcbiAgICAgKiBAdHlwZSB7ZmFuZ2tlaG91Lkx5cmljW119XG4gICAgICovXG4gICAgTXVzaWMubHJjID0gdW5kZWZpbmVkO1xuICAgIC8qKlxuICAgICAqIOmfs+mikeWGheWuue+8iGJsb2LmiJZodHRw77yJXG4gICAgICogQHR5cGUge3N0cmluZ31cbiAgICAgKi9cbiAgICBNdXNpYy5jb250ZW50ID0gdW5kZWZpbmVkO1xuICAgIC8qKlxuICAgICAqIOWIpOaWreS4pOS4qk11c2lj57G75piv5ZCm55u45ZCM77yM6YCa6L+H5qaC546H5Yik5patXG4gICAgICogQGZ1bmN0aW9uIGVxdWFsc1xuICAgICAqIEBwYXJhbSB7ZmFuZ2tlaG91Lk11c2ljfSBtdXNpY1xuICAgICAqL1xuICAgIE11c2ljLmVxdWFscyA9IGZ1bmN0aW9uIChtdXNpYykge1xuICAgICAgICBsZXQgcmVzdWx0ID0gMDtcbiAgICAgICAgaWYodGhpcy5uYW1lID09PSBtdXNpYy5uYW1lKSB7XG4gICAgICAgICAgICByZXN1bHQrKztcbiAgICAgICAgfVxuICAgICAgICBpZih0aGlzLmFydGlzdCA9PT0gbXVzaWMuYXJ0aXN0KXtcbiAgICAgICAgICAgIHJlc3VsdCsrO1xuICAgICAgICB9XG4gICAgICAgIGlmKHRoaXMuY29udGVudCA9PT0gbXVzaWMuY29udGVudCl7XG4gICAgICAgICAgICByZXN1bHQrKztcbiAgICAgICAgfVxuICAgICAgICBpZih0aGlzLmNvdmVyID09PSBtdXNpYy5jb3Zlcil7XG4gICAgICAgICAgICByZXN1bHQrKztcbiAgICAgICAgfVxuICAgICAgICBpZihyZXN1bHQgPj0gMil7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5scmMgPT09IG11c2ljLmxyYztcblxuICAgIH1cblxuICAgIC8v5paH5qGj5Zyoe0BsaW5rIE11c2ljfeS4reOAguOAguOAguOAguOAguOAglxuICAgIGZhbmdrZWhvdS5NdXNpYyA9IE11c2ljO1xuXG59KCkpIl19
